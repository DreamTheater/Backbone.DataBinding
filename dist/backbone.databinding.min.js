/*!
 * Backbone.DataBinding v0.1.1
 * https://github.com/DreamTheater/Backbone.DataBinding
 *
 * Copyright (c) 2013 Dmytro Nemoga
 * Released under the MIT license
 */
(function(){"use strict";var t=Backbone.View;Backbone.View=t.extend({readers:{html:function(t){return t.html()},text:function(t){return t.text()},value:function(t){return t.val()},checked:function(t){var e,n=_.pluck(t.serializeArray(),"value");return e="radio"===t.prop("type")?n[0]:t.length>1?n:!!n[0]}},writers:{html:function(t,e){e?t.html(e):t.empty()},text:function(t,e){e?t.text(e):t.empty()},value:function(t,e){e?t.val(e):t.val(null)},checked:function(t,e){var n=_.isArray(e)?e:[e],i=t.filter(function(){return _.contains(n,this.value)});"radio"===t.prop("type")?i.prop("checked",!0):t.length>1?(t.prop("checked",!1),i.prop("checked",!0)):t.prop("checked",e)}},constructor:function(){this._bindings={},t.apply(this,arguments)},setElement:_.wrap(t.prototype.setElement,function(t,e,n){return this.$el&&this._undelegateBindings(),t.call(this,e,n),this._delegateBindings(),this}),binding:function(t,e,n,i){var s=n.split(":"),r=s[0],c=s[1];return t&&(this._bindings[t+" "+e]=_.bind(function(){var t=this.$(e),n=this.readers[r],s=null;s=n?n.call(this,t):t.prop(r),this.model.set(c,s,i)},this),this._delegateBindings()),this.listenTo(this.model,"change",function(t){var n=this.$(e),i=this.writers[r],s=t.get(c);i?i.call(this,n,s):n.prop(r,s)}),this.syncToModel(),this},syncToModel:function(){var t=this.model;return t.trigger("change",t),this},_delegateBindings:function(){this._undelegateBindings(),_.each(this._bindings,function(t,e){var n=e.match(/^(\S+)\s*(.*)$/),i=n[1]+".delegateBindings."+this.cid,s=n[2];this.$el.on(i,s,t)},this)},_undelegateBindings:function(){this.$el.off(".delegateBindings."+this.cid)}})})();