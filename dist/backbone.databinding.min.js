/*!
 * Backbone.DataBinding v0.1.2
 * https://github.com/DreamTheater/Backbone.DataBinding
 *
 * Copyright (c) 2013 Dmytro Nemoga
 * Released under the MIT license
 */
(function(){"use strict";var e,t;module&&module.exports&&exports?(e=require("underscore"),t=require("backbone")):(e=window._,t=window.Backbone);var i=t.View;t.View=i.extend({readers:{html:function(e){return e.html()},text:function(e){return e.text()},value:function(e){return e.val()},checked:function(t){var i,n=e.pluck(t.serializeArray(),"value");return i="radio"===t.prop("type")?n[0]:t.length>1?n:!!n[0]}},writers:{html:function(e,t){t?e.html(t):e.empty()},text:function(e,t){t?e.text(t):e.empty()},value:function(e,t){t?e.val(t):e.val(null)},checked:function(t,i){var n=e.isArray(i)?i:[i],r=t.filter(function(){return e.contains(n,this.value)});"radio"===t.prop("type")?r.prop("checked",!0):t.length>1?(t.not(r).filter(":checked").prop("checked",!1),r.not(":checked").prop("checked",!0)):t.prop("checked",i)}},constructor:function(){this._bindings={},i.apply(this,arguments)},setElement:e.wrap(i.prototype.setElement,function(e,t,i){return this.$el&&this.undelegateBindings(),e.call(this,t,i),this.delegateBindings(),this}),binding:function(t,i,n,r){var s=n.split(":"),o=s[0],c=s[1];return t&&(this._bindings[t+" "+i]=e.bind(function(){var e=this.$(i),t=this.readers[o],n=t?t.call(this,e):e.prop(o);this.model.set(c,n,r)},this),this.delegateBindings()),this.listenTo(this.model,"change",function(e){var t=this.$(i),n=this.writers[o],r=e.get(c);n?n.call(this,t,r):t.prop(o,r)}),this.syncToModel(),this},delegateBindings:function(){this.undelegateBindings(),e.each(this._bindings,function(e,t){var i=t.match(/^(\S+)\s*(.*)$/),n=i[1]+".delegateBindings."+this.cid,r=i[2];this.$el.on(n,r,e)},this)},undelegateBindings:function(){this.$el.off(".delegateBindings."+this.cid)},syncToModel:function(){var e=this.model;return e.trigger("change",e),this}})})();