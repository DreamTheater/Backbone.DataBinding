/*!
 * Backbone.DataBinding v0.1.1
 * https://github.com/DreamTheater/Backbone.DataBinding
 *
 * Copyright (c) 2013 Dmytro Nemoga
 * Released under the MIT license
 */
(function(){"use strict";var t=Backbone.View;Backbone.View=t.extend({readers:{html:function(t){return t.html()},text:function(t){return t.text()},checked:function(t){var e,i=_.pluck(t.serializeArray(),"value");return e="radio"===t.prop("type")?i[0]:t.length>1?i:!!i[0]}},writers:{html:function(t,e){e?t.html(e):t.empty()},text:function(t,e){e?t.text(e):t.empty()},checked:function(t,e){var i=_.isArray(e)?e:[e],n=t.filter(function(){return _.contains(i,this.value)});"radio"===t.prop("type")?n.prop("checked",!0):t.length>1?(t.prop("checked",!1),n.prop("checked",!0)):t.prop("checked",e)}},constructor:function(){this._bindings={},t.apply(this,arguments)},setElement:_.wrap(t.prototype.setElement,function(t,e,i){return this.$el&&this._undelegateBindings(),t.call(this,e,i),this._delegateBindings(),this}),binding:function(t,e,i,n){var s=i.split(":"),r=s[0],h=s[1];return t&&(this._bindings[t+" "+e]=_.bind(function(){var t=this.$(e),i=this.readers[r],s=null;s=i?i.call(this,t):t.prop(r),this.model.set(h,s,n)},this),this._delegateBindings()),this.listenTo(this.model,"change",function(t){var i=this.$(e),n=this.writers[r],s=t.get(h);n?n.call(this,i,s):i.prop(r,s)}),this.syncToModel(),this},syncToModel:function(){return this.model.trigger("change",this.model),this},_delegateBindings:function(){this._undelegateBindings(),_.each(this._bindings,function(t,e){var i=e.match(/^(\S+)\s*(.*)$/),n=i[1]+".delegateBindings."+this.cid,s=i[2];this.$el.on(n,s,t)},this)},_undelegateBindings:function(){this.$el.off(".delegateBindings."+this.cid)}})})();