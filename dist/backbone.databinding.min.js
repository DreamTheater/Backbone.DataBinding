/*!
 * Backbone.DataBinding v0.1.1
 * https://github.com/DreamTheater/Backbone.DataBinding
 *
 * Copyright (c) 2013 Dmytro Nemoga
 * Released under the MIT license
 */
(function(){"use strict";var t=Backbone.View;Backbone.View=t.extend({readers:{html:function(t,e){return e.html()},text:function(t,e){return e.text()},value:function(t,e){return e.val()},checked:function(t,e){return"radio"===e.prop("type")?_.pluck(e.serializeArray(),"value")[0]:e.length>1?_.pluck(e.serializeArray(),"value"):e.prop("checked")}},writers:{html:function(t,e,i){i.html(e)},text:function(t,e,i){i.text(e)},value:function(t,e,i){i.val(e)},checked:function(t,e,i){"radio"===i.prop("type")?i.filter('[value="'+e+'"]').prop("checked",!0):i.length>1?i.prop("checked",!1).filter(_.map(e,function(t){return'[value="'+t+'"]'}).join(", ")).prop("checked",!0):i.prop("checked",e)}},constructor:function(){this._bindings={},t.apply(this,arguments)},setElement:_.wrap(t.prototype.setElement,function(t,e,i){return this.$el&&this._undelegateBindings(),t.call(this,e,i),this._delegateBindings(),this}),binding:function(t,e,i,n){var s=i.split(":"),r=s[0],c=s[1];return t&&(this._bindings[t+" "+e]=_.bind(function(){var t=this.$(e),i=this.readers[r],s=null;s=i?i.call(this,c,t):t.prop(r),this.model.set(c,s,n)},this),this._delegateBindings()),this.listenTo(this.model,"change",function(t){var i=this.$(e),n=this.writers[r],s=t.get(c);n?n.call(this,c,s,i):i.prop(r,s)}),this.syncToModel(),this},syncToModel:function(){return this.model.trigger("change",this.model),this},_delegateBindings:function(){this._undelegateBindings(),_.each(this._bindings,function(t,e){var i=e.match(/^(\S+)\s*(.*)$/),n=i[1]+".delegateBindings."+this.cid,s=i[2];this.$el.on(n,s,t)},this)},_undelegateBindings:function(){this.$el.off(".delegateBindings."+this.cid)}})})();